const m=/#/g,L=/&/g,u=/\//g,S=/\?/g,d=/\+/g,A=/%7c/gi,O=/%252f/gi;function P(e){return encodeURI(""+e).replace(A,"|")}function I(e){return P(e).replace(m,"%23").replace(S,"%3F").replace(O,"%2F").replace(L,"%26").replace(d,"%2B")}function M(e){return I(e).replace(u,"%2F")}const w=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,T=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,C=/^([/\\]\s*){2,}[^/\\]/,N=/\/$|\/\?|\/#/,v=/^\.?\//;function f(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?w.test(e):T.test(e)||(t.acceptRelative?C.test(e):!1)}function o(e="",t){return t?N.test(e):e.endsWith("/")}function b(e="",t){if(!t)return(o(e)?e.slice(0,-1):e)||"/";if(!o(e,!0))return e||"/";let r=e,a="";const s=e.indexOf("#");s>=0&&(r=e.slice(0,s),a=e.slice(s));const[n,...c]=r.split("?");return(n.slice(0,-1)||"/")+(c.length>0?`?${c.join("?")}`:"")+a}function p(e="",t){if(!t)return e.endsWith("/")?e:e+"/";if(o(e,!0))return e||"/";let r=e,a="";const s=e.indexOf("#");if(s>=0&&(r=e.slice(0,s),a=e.slice(s),!r))return a;const[n,...c]=r.split("?");return n+"/"+(c.length>0?`?${c.join("?")}`:"")+a}function x(e=""){return e.startsWith("/")}function W(e=""){return x(e)?e:"/"+e}function F(e,t){if(H(t)||f(e))return e;const r=b(t);return e.startsWith(r)?e:j(r,e)}function H(e){return!e||e==="/"}function U(e){return e&&e!=="/"}function j(e,...t){let r=e||"";for(const a of t.filter(s=>U(s)))if(r){const s=a.replace(v,"");r=p(r)+s}else r=a;return r}const G=Symbol.for("ufo:protocolRelative");function y(e="",t){const r=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(r){const[,h,l=""]=r;return{protocol:h.toLowerCase(),pathname:l,href:h+l,auth:"",host:"",search:"",hash:""}}if(!f(e,{acceptRelative:!0}))return t?y(t+e):i(e);const[,a="",s,n=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,c="",R=""]=n.match(/([^#/?]*)(.*)?/)||[],{pathname:E,search:_,hash:g}=i(R.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:a.toLowerCase(),auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:c,pathname:E,search:_,hash:g,[G]:!a}}function i(e=""){const[t="",r="",a=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:r,hash:a}}export{W as a,b,I as c,p as d,M as e,f as h,j,y as p,F as w};
