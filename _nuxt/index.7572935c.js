const L=/#/g,g=/&/g,S=/\//g,m=/\?/g,A=/\+/g,P=/%7c/gi,d=/%252f/gi;function O(e){return encodeURI(""+e).replace(P,"|")}function T(e){return O(e).replace(L,"%23").replace(m,"%3F").replace(d,"%2F").replace(g,"%26").replace(A,"%2B")}function W(e){return T(e).replace(S,"%2F")}const I=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,w=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,N=/^([/\\]\s*){2,}[^/\\]/;function l(e,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?I.test(e):w.test(e)||(t.acceptRelative?N.test(e):!1)}const p=/\/$|\/\?/;function c(e="",t=!1){return t?p.test(e):e.endsWith("/")}function C(e="",t=!1){if(!t)return(c(e)?e.slice(0,-1):e)||"/";if(!c(e,!0))return e||"/";const[s,...a]=e.split("?");return(s.slice(0,-1)||"/")+(a.length>0?`?${a.join("?")}`:"")}function H(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(c(e,!0))return e||"/";const[s,...a]=e.split("?");return s+"/"+(a.length>0?`?${a.join("?")}`:"")}function U(e=""){return e.startsWith("/")}function y(e=""){return U(e)?e:"/"+e}function F(e,t){if(b(t)||l(e))return e;const s=C(t);return e.startsWith(s)?e:G(s,e)}function b(e){return!e||e==="/"}function j(e){return e&&e!=="/"}const v=/^\.?\//;function G(e,...t){let s=e||"";for(const a of t.filter(r=>j(r)))if(s){const r=a.replace(v,"");s=H(s)+r}else s=a;return s}function M(e="",t){const s=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(s){const[,n,o=""]=s;return{protocol:n,pathname:o,href:n+o,auth:"",host:"",search:"",hash:""}}if(!l(e,{acceptRelative:!0}))return t?M(t+e):h(e);const[,a="",r,i=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,f="",R=""]=i.match(/([^#/?]*)(.*)?/)||[],{pathname:E,search:_,hash:u}=h(R.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:a,auth:r?r.slice(0,Math.max(0,r.length-1)):"",host:f,pathname:E,search:_,hash:u}}function h(e=""){const[t="",s="",a=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:s,hash:a}}export{y as a,C as b,H as c,T as d,W as e,l as h,G as j,M as p,F as w};
